#--------------------------------------
# Stormwind
#--------------------------------------
STW_stormwind_column_1 = {
	slot = 1
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_army_reform = {
		icon = mission_salvage
		position = 1

		trigger = {
			army_size = 50
			army_tradition = 50
			army_professionalism = 0.25
		}

		effect = {
			country_event = { id = wwu_mission_stw_main.1 }
		}
	}

	STW_stormwind_order_of_knights = {
		icon = mission_horses
		position = 2

		required_missions = { STW_stormwind_army_reform }

		trigger = {
			army_professionalism = 0.5
			army_tradition = 75
			cavalry_fraction = 0.2
			has_global_modifier_value = {
				which = cavalry_power
				value = 0.35
			}
		}

		effect = {
			custom_tooltip = SPECIALIST_BROTHERHOOD_TT
			set_country_flag = stormwind_avalable_horsebrothers

			#custom_tooltip = ENABLE_PRIVILIEGE_LORDS_ON_HORSES_TT
			#set_country_flag = stormwind_enable_privilige_lords_on_horses

			add_country_modifier = {
				name = mission_cavalry_expansion
				duration = -1
			}
		}
	}

    STW_stormwind_faith_and_magic = {
        icon = mission_archaeology_skill
        position = 3

        trigger = {
			2204 = {
				has_great_project = {
					type = gp_cathedral_of_light
					tier = 2
				}
			}
			2205 = {
				has_great_project = {
					type = gp_stormwind_mage_tower
					tier = 2
				}
			}
            OR = {
                innovativeness = 75
                religious_unity = 0.9
            }
        }

        provinces_to_highlight = {
            OR = {
                province_id = 2205
                province_id = 2204
            }
        }

        effect = {
            country_event = { id = wwu_mission_stw_main.2 }
        }
    }

	STW_stormwind_m_securing_northern_redridge = {
		icon = mission_camp_flag
		position = 4

		required_missions = { STW_stormwind_m_securing_stonewatch_keep }

		trigger = {
			region_redridge_mountains = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_redridge_mountains
		}

		effect = {
			area_valley_of_ashes = {
				add_permanent_claim = ROOT
			}
			add_prestige = 5
			add_adm_power = 50
		}
	}

	STW_stormwind_m_morgan_camp = {
		icon = mission_orc_campfire
		position = 5

		required_missions = { STW_stormwind_m_securing_northern_redridge }

		trigger = {
			area_valley_of_ashes = {
				owned_by = ROOT
			}
			1989 = {
				base_tax = 3
				base_production = 4
				base_manpower = 5
			}
		}

		provinces_to_highlight = {
			area = area_valley_of_ashes
		}

		effect = {
			country_event = { id = wwu_mission_stw_main.8 }
		}
	}

	STW_stormwind_m_secure_eastern_steppes = {
		icon = mission_black_dragonflight
		position = 6

		required_missions = { STW_stormwind_m_morgan_camp }

		trigger = {
			area_ashen_shore = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			area_chiselgrip = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			area_dreadmaul_rock = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			OR = {
				area = area_dreadmaul_rock
				area = area_chiselgrip
				area = area_ashen_shore
			}
		}

		effect = {
			region_burning_steppes = {
				add_claim = ROOT
			}
		}
	}

	STW_stormwind_m_invasion_of_blackrock = {
		icon = mission_blackrock_mountain
		position = 7

		required_missions = { STW_stormwind_m_secure_eastern_steppes }

		trigger = {
			area_blackrock_exterior = {
				type = all
				controlled_by = ROOT
			}
			area_blackrock_mountain = {
				type = all
				controlled_by = ROOT
			}
			area_blackrock_valley = {
				type = all
				controlled_by = ROOT
			}
		}

		provinces_to_highlight = {
			OR = {
				area = area_blackrock_exterior
				area = area_blackrock_mountain
				area = area_blackrock_valley
			}
		}

		effect = {
			if = {
				limit = {
					NOT = { exists = A30 }
				}
				country_event = { id = wwu_mission_stw_main.9 days = 60}
			}
			else = {
				country_event = { id = wwu_mission_stw_main.10 }
			}
		}
	}

	STW_stormwind_m_dousing_molten_core = {
		icon = mission_fire_elemental
		position = 8

		required_missions = { STW_stormwind_m_invasion_of_blackrock }

		trigger = {
			P26 = {
				war_with = ROOT
			}
			3155 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			province_id = 3155
		}

		effect = {
			2576 = {
				add_core = ROOT
				cede_province = ROOT
			}

			white_peace = P26
		}
	}

	STW_stormwind_m_fall_of_the_firelord = {
		icon = mission_ragnaros
		position = 9

		required_missions = { STW_stormwind_m_dousing_molten_core }

		trigger = {
            offensive_war_with = P26
            war_score_against = {
                who = P26
                value = 80
            }
            2601 = {
                controlled_by = ROOT
            }
        }

		provinces_to_highlight = {
			province_id = 2601
		}

		effect = {
			country_event = { id = wwu_mission_stw_main.11 }
		}
	}

	STW_stormwind_m_preparation_of_restoration = {
		icon = mission_tools
		position = 11

		trigger = {
			stability = 1
			OR = {
				employed_advisor = {
					type = supervisor
				}
				full_idea_group = wwu_development_ideas
			}

			area_stormwind = {
				type = all
				OR = {
					has_state_edict = edict_encourage_construction
					has_state_edict = edict_encourage_development
				}
			}

			area_stormwind_coast = {
				type = all
				OR = {
					has_state_edict = edict_encourage_construction
					has_state_edict = edict_encourage_development
				}
			}

			area_lower_stormwind = {
				type = all
				OR = {
					has_state_edict = edict_encourage_construction
					has_state_edict = edict_encourage_development
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				area = area_lower_stormwind
				area = area_stormwind
				area = area_stormwind_coast
			}
		}

		effect = {
			add_country_modifier = {
					name = mission_stormwind_development
					duration = 9125
				}
			}
		}

	STW_stormwind_m_expansion_of_trade_district = {
		icon = mission_marketplacewc3r
		position = 12

		required_missions = { STW_stormwind_m_preparation_of_restoration }

		trigger = {
			2202 = {
				development = 12
				base_production = 6
				OR = {
					has_building = wow_market_1
					has_building = wow_market_2
					has_building = wow_market_3
				}
				OR = {
					province_has_center_of_trade_of_level = 2
					province_has_center_of_trade_of_level = 3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 2202
		}

		effect = {
			2202 = {
				add_base_tax = 2
				add_base_production = 2
			}
			
			if = {
				limit = {
					2202 = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
				}
				2202 = {
					add_center_of_trade_level = 1
				}
			}

			define_advisor = {
				type = trader
				skill = 3
				location = 2202
				discount = yes
				culture = culture_stormwindian
				religion = holy_light
			}
		}
	}

	STW_stormwind_m_development_of_old_town = {
		icon = mission_human_barrackswc3r
		position = 13

		required_missions = { STW_stormwind_m_expansion_of_trade_district }

		trigger = {
			2206 = {
				development = 15
				OR = {
					base_manpower = 10
					holy_order = warrior_order
				}
				OR = {
					has_building = wow_arsenal_1
					has_building = wow_arsenal_2
					has_building = wow_arsenal_3
				}
				OR = {
					has_building = wow_tavern_1
					has_building = wow_tavern_2
					has_building = wow_tavern_3
				}
				OR = {
					has_building = wow_barracks_1
					has_building = wow_barracks_2
					has_building = wow_barracks_3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 2206
		}

		effect = {
			2206 = {
				add_province_modifier = {
					name = mission_elwynn_fortification
					duration = -1
				}
				add_base_manpower = 2
				add_base_tax = 2
			}
			add_army_professionalism = 0.05

			custom_tooltip = ENABLE_PRIVILIGE_GUILD_OF_HEROES_TT

			hidden_effect = {
				set_country_flag = stormwind_enable_privilige_guild_of_heroes
			}
		}
	}

	STW_stormwind_m_industial_district = {
		icon = mission_gnome_tech
		position = 14

		required_missions = { STW_stormwind_m_development_of_old_town }

		trigger = {
			2203 = {
				development = 20
				base_production = 10
				OR = {
					has_building = wow_mine_1
					has_building = wow_mine_2
					has_building = wow_mine_3
				}
			}
			2505 = {
				development = 15
				base_production = 8
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 2203
				province_id = 2505
			}
		}

		effect = {
			2203 = {
				change_trade_goods = resource_plate_armor
				add_base_production = 3
				add_province_modifier = {
					name = mission_dwarven_district
					duration = -1
				}
			}
			2505 = {
				change_trade_goods = resource_devices
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			
			define_advisor = {
				type = natural_scientist
				name = "Grimand Elmore"
				skill = 3
				location = 2203
				discount = yes
				culture = culture_ironforge
				religion = holy_light
			}

			add_prestige_or_monarch_power = {
				amount = 10
			}
		}
	}

	STW_stormwind_m_the_park_district = {
		icon = mission_herbalism
		position = 15

		required_missions = { STW_stormwind_m_industial_district }

		trigger = {
			2207 = {
				development = 12
				OR = {
					has_building = wow_tavern_1
					has_building = wow_tavern_2
					has_building = wow_tavern_3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 2207
		}

		effect = {
			add_stability = 1
			2207 = {
				change_trade_goods = resource_potions
				add_base_tax = 3
			}
			add_country_modifier = {
				name = mission_park_district
				duration = -1
			}
		}
	}
}

STW_stormwind_column_2 = {
	slot = 2
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_m_elwynn_fortification = {
		icon = mission_herbalism
		position = 2

		required_missions = { STW_stormwind_m_reestablish_order }

		trigger = {
			661 = {
				OR = {
					has_building = wow_tower_1
					has_building = wow_tower_2
					has_building = wow_tower_3
				}
				has_fort_building_trigger = yes
				base_manpower = 5
			}
			1618 = {
				OR = {
					has_building = wow_tower_1
					has_building = wow_tower_2
					has_building = wow_tower_3
				}
				has_fort_building_trigger = yes
				base_manpower = 5
			}
			1058 = {
				OR = {
					has_building = wow_arsenal_1
					has_building = wow_arsenal_2
					has_building = wow_arsenal_3
				}
				base_manpower = 6
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 661
				province_id = 1618
				province_id = 1058
			}
		}

		effect = {
			add_mil_power = 100

			661 = {
				add_province_modifier = {
					name = mission_elwynn_fortification
					duration = -1
				}
			}

			1618 = {
				add_province_modifier = {
					name = mission_elwynn_fortification
					duration = -1
				}
			}

			1058 = {
				add_base_manpower = 2
				add_base_tax = 1
				add_base_production = 1
				add_province_modifier = {
					name = mission_elwynn_fortification
					duration = -1
				}
			}
		}
	}

	STW_stormwind_m_securing_stonewatch_keep = {
		icon = mission_equipment
		position = 3

		required_missions = { STW_stormwind_m_elwynn_fortification }

		trigger = {
			800 = {
				country_or_non_sovereign_subject_holds = ROOT
				base_manpower = 8
				has_fort_building_trigger = yes
			}
		}

		provinces_to_highlight = {
			province_id = 800
		}

		effect = {
			region_redridge_mountains = {
				add_permanent_claim = ROOT
				add_permanent_claim = RRG
			}

				add_mil_power = 100

				800 = {
					add_province_modifier = {
						name = mission_redridge_fortification
						duration = -1
					}
				}

				custom_tooltip = SPECIALIST_STONEWATCH_TT
				set_country_flag = stormwind_avalable_stonewatch
		}
	}

	STW_stormwind_m_invasion_of_black_moras = {
		icon = mission_horde_invasion
		position = 4

		required_missions = { STW_stormwind_m_securing_stonewatch_keep }

		trigger = {
			area_splinterspear_bog = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

			provinces_to_highlight = {
				area = area_splinterspear_bog
			}

			effect = {
				region_swamp_of_sorrows = {
					add_permanent_claim = ROOT
				}
				region_blasted_lands = {
					add_permanent_claim = ROOT
			}
		}
	}

	STW_stormwind_m_culling_the_hakkari = {
		icon = mission_blood_troll
		position = 5

		required_missions = { STW_stormwind_m_invasion_of_black_moras }

		trigger = {
			region_swamp_of_sorrows = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				region = ROOT
				culture = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_swamp_of_sorrows
		}

		effect = {
			region_swamp_of_sorrows = {
				add_province_modifier = {
					name = mission_swamp_of_sorrows
					duration = -1
				}
			}

			add_country_modifier = {
				name = mission_hakkari_culling
				duration = -1
			}

			add_prestige = 20
		}
	}

	STW_stormwind_m_the_mage_district = {
		icon = mission_highelf_mage_barrackswc3r
		position = 12

		required_missions = { STW_stormwind_m_preparation_of_restoration }

		trigger = {
			2205 = {
				development = 15
				OR = {
					has_building = wow_tower_1
					has_building = wow_tower_2
					has_building = wow_tower_3
				}
				has_building = wow_portal
			}
			OR = {
				has_great_project = {
    				type = gp_stormwind_mage_tower
    				tier = 0
				}
				has_great_project = {
    				type = gp_stormwind_mage_tower
    				tier = 1
				}
				has_great_project = {
    				type = gp_stormwind_mage_tower
    				tier = 2
				}
				has_great_project = {
    				type = gp_stormwind_mage_tower
    				tier = 3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 2205
		}

		effect = {
			2205 = {
				add_base_manpower = 1
				add_base_production = 1
				add_base_tax = 1
			}
			add_great_project_tier = {
    			type = gp_stormwind_mage_tower
    			tier = 1
			}

			add_adm_power = 100
			add_prestige_or_monarch_power = {
				amount = 10
			}
		}
	}

	STW_stormwind_m_the_catedral_district = {
		icon = mission_paladin_blinding_light
		position = 13

		required_missions = { STW_stormwind_m_the_mage_district }

		trigger = {
			2204 = {
				development = 15
				base_tax = 5
				OR = {
					has_building = wow_temple_1
					has_building = wow_temple_2
					has_building = wow_temple_3
				}
			}
			OR = {
				has_great_project = {
    				type = gp_cathedral_of_light
    				tier = 0
				}
				has_great_project = {
    				type = gp_cathedral_of_light
    				tier = 1
				}
				has_great_project = {
    				type = gp_cathedral_of_light
    				tier = 2
				}
				has_great_project = {
    				type = gp_cathedral_of_light
    				tier = 3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 2204
		}

		effect = {
			2204 = {
				add_base_manpower = 2
			}
			add_great_project_tier = {
    			type = gp_cathedral_of_light
    			tier = 1
			}

			define_advisor = {
				type = inquisitor
				skill = 2
				location = 2204
				discount = yes
				culture = culture_stormwindian
				religion = holy_light
			}
		}
	}

	STW_stormwind_m_gates_of_stormwind = {
		icon = mission_human_building_upgrade_T2_wc3r
		position = 14

		required_missions = { STW_stormwind_m_the_catedral_district }

		trigger = {
			2149 = {
				base_manpower = 12
				OR = {
					has_building = wow_arsenal_1
					has_building = wow_arsenal_2
					has_building = wow_arsenal_3
				}
				OR = {
					has_building = wow_barracks_1
					has_building = wow_barracks_2
					has_building = wow_barracks_3
				}
				OR = {
					has_building = wow_tower_1
					has_building = wow_tower_2
					has_building = wow_tower_3
				}
				OR = {
					has_building = wow_training_ground_1
					has_building = wow_training_ground_2
					has_building = wow_training_ground_3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 2149
		}

		effect = {
			2149 = {
				add_province_modifier = {
					name = mission_stormwind_gates
					duration = -1
				}
			}
			#Add some decision about forts

			add_manpower = 10
			add_power_projection = {
                type = mission_rewards_power_projection
				amount = 10
			}

			custom_tooltip = SPECIALIST_FOOTMENT_TT
			set_country_flag = stormwind_avalable_footmen
		}
	}

	STW_stormwind_m_stormwind_harbor = {
		icon = mission_human_shipyardwc3r
		position = 15

		required_missions = { STW_stormwind_m_gates_of_stormwind }

		trigger = {
			2141 = {
				development = 20
				base_production = 10
			}
			4111 = {
				development = 10
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 2141
				province_id = 4111
			}
		}

		effect = {
			add_country_modifier = {
				name = mission_stormwind_harbor
				duration = -1
			}

			2141 = {
				add_province_modifier = {
					name = mission_harbor
					duration = -1
				}
				center_of_trade = 1
			}

			#add decision frostsabre
			custom_tooltip = ENABLE_PRIVILIGE_STORMWIND_PURCHASE_TRANSPORT_TT
			set_country_flag = stormwind_enable_traders_purchase_transportships_privilege
		}
	}

	STW_stormwind_m_stormwind_keep = {
		icon = mission_humancastlewc3r
		position = 16

		required_missions = { STW_stormwind_m_stormwind_harbor STW_stormwind_m_the_park_district }

		trigger = {
			1022 = {
				development = 30
				has_fort_building_trigger = yes
				prosperity = 100
			}
		}

		provinces_to_highlight = {
			province_id = 1022
		}

		effect = {
			add_prestige_or_monarch_power = {
				amount = 50
			}

			add_country_modifier = {
				name = mission_stormwind_keep
				duration = -1
			}

			area_stormwind = {
				add_province_modifier = {
					name = mission_stw_keep_local
					duration = -1
				}
			}
			area_lower_stormwind = {
				add_province_modifier = {
					name = mission_stw_keep_local
					duration = -1
				}
			}
			area_stormwind_coast = {
				add_province_modifier = {
					name = mission_stw_keep_local
					duration = -1
				}
			}

			if = {
				limit = {
					STW = {
						has_country_modifier = stormwind_crippled
					}
				}
				remove_country_modifier = stormwind_crippled
			}
		}
	}
}

STW_stormwind_column_3 = {
	slot = 3
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_m_reestablish_order = { 
		icon = mission_paladin_empowered_seals_righteous
        position = 1

		trigger = {
			WST = {
				OR = {
					NOT = { exists = WST}
					OR = {
						has_opinion = {
							who = STW
							value = 175
						}
						NOT = { liberty_desire = 20 }
					}
				}
			}
			DKS = {
				OR = {
					NOT = { exists = DKS}
					OR = {
						has_opinion = {
							who = STW
							value = 175
						}
						NOT = { liberty_desire = 20 }
					}
				}
			}
			RRG = {
				OR = {
					NOT = { exists = RRG}
					OR = {
						has_opinion = {
							who = STW
							value = 175
						}
						NOT = { liberty_desire = 20 }
					}
				}
			}
			stability = 1
			legitimacy = 90
		}

		provinces_to_highlight = {
			OR = {
				is_capital_of = RRG
				is_capital_of = WST
				is_capital_of = DKS
			}
		}

		effect = {
			add_country_modifier = {
				name = mission_satisfied_subjects
				duration = -1
			}

			add_adm_power = 100
			add_dip_power = 100
		}
	}

	STW_stormwind_m_stormwind_ironforge_pact = {
		icon = mission_ironforge_crest
		position = 2
		
		required_missions = { STW_stormwind_m_reestablish_order}

		trigger = {
			OR = {
				NOT = { exists = A29 }
				A29 = {
					exists = yes
					has_opinion = {
						who = STW
						value = 180
					}
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				is_capital_of = A29
				area = area_ironforge
			}
		}

		effect = {
			if = {
				limit = {
					exists = A29
				}
				create_alliance = A29
				add_historical_friend = A29
				add_accepted_culture = culture_ironforge
				A29 = {
					add_historical_friend = STW
					add_accepted_culture = culture_stormwindian
				}
			}
			else = {
				area_ironforge = {
					add_permanent_claim = ROOT
				}
				add_mil_power = 100
			}
		}
	}

	STW_stormwind_m_gnomish_allies = {
		icon = mission_gnome_male
		position = 3

		required_missions = { STW_stormwind_m_stormwind_ironforge_pact }

		trigger = {
			OR = {
				NOT = {exists = A32 }
				A32 = {
					exists = yes
					has_opinion = {
						who = STW
						value = 165
					}
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				is_capital_of = A32
				area = area_gnomeregan
			}
		}

		effect = {
			if = {
				limit = {
					exists = A32
				}
				create_alliance = A32
				add_historical_friend = A32
				add_accepted_culture = culture_gnome
				add_country_modifier = {
					name = mission_gnomish_guests
					duration = -1
				}
				A32 = {
					add_historical_friend = STW
					add_accepted_culture = culture_stormwindian
					add_country_modifier = {
						name = mission_stormwindian_engineers
						duration = -1
					}
				}
			}
			else = {
				area_ironforge = {
					add_permanent_claim = ROOT
				}
				add_mil_power = 100
			}
		}
	}

	STW_stormwind_m_restoration_faith_duskwood = {
		icon = mission_hearthstone
		position = 9

		required_missions = { STW_stormwind_m_reducing_the_unrest }

		trigger = {
			region_duskwood = {
				type = all
				religion = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_duskwood
		}

		effect = {
			add_adm_power = 75
			add_prestige = 15
		}
	}

	STW_stormwind_m_human_repopulation_duskwood = {
		icon = mission_grand_widow_faerlina
		position = 10

		required_missions = { STW_stormwind_m_restoration_faith_duskwood }

		trigger = {
			region_duskwood = {
				type = all
				culture = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_duskwood
		}

		effect = {
			region_duskwood = {
				add_province_modifier = {
					name = mission_duskwood_production
					duration = 7300
				}
			}
		}
	}

	STW_stormwind_m_development_duskwood = {
		icon = mission_arcane_tower
		position = 11

		required_missions = { STW_stormwind_m_human_repopulation_duskwood }

		trigger = {
			1021 = {
				development = 15
			}
			637 = {
				development = 15
			}
			682 = {
				development = 10
			}
			985 = {
				development = 10
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 1021
				province_id = 637
				province_id = 682
				province_id = 985
			}
		}

		effect = {
			region_duskwood = {
				add_province_modifier = {
					name = mission_duskwood_developed
					duration = -1
				}
			}
		}
	}

	STW_stormwind_m_goldshire_expansion = {
		icon = mission_human_keepwc3r
		position = 15

		required_missions = { STW_stormwind_m_gates_of_stormwind }

		trigger = {
			area_goldshire = {
				type = all
				owned_by = ROOT
				religion = ROOT
				culture = ROOT
			}
			603 = {
				development = 15
				OR = {
					has_building = wow_tavern_1
					has_building = wow_tavern_2
					has_building = wow_tavern_3
				}
				OR = {
					has_building = wow_farm_1
					has_building = wow_farm_2
					has_building = wow_farm_3
				}
				OR = {
					has_building = wow_market_1
					has_building = wow_market_2
					has_building = wow_market_3
				}
			}
			2139 = {
				development = 8
				OR = {
					has_building = wow_farm_1
					has_building = wow_farm_2
					has_building = wow_farm_3
				}
			}
			2138 = {
				development = 8
				OR = {
					has_building = wow_farm_1
					has_building = wow_farm_2
					has_building = wow_farm_3
				}
			}
		}

		provinces_to_highlight = {
			area = area_goldshire
		}

		effect = {
			add_years_of_income = 1

			area_goldshire = {
				add_province_modifier = {
					name = mission_elwynn_prosperity
					duration = -1
				}
			}
			603 = {
				add_base_tax = 3
				add_base_manpower = 1
				add_center_of_trade_level = 1
			}
		}
	}

	STW_stormwind_m_westvale_and_eastvale = {
		icon = mission_human_lumbermillwc3r
		position = 16

		required_missions = { STW_stormwind_m_goldshire_expansion }

		trigger = {
			area_westvale = {
				type = all
				development = 10
				base_tax = 3
			}
			area_eastvale = {
				type = all
				development = 10
				base_tax = 3
			}
		}

		provinces_to_highlight = {
			OR = {
				area = area_westvale
				area = area_eastvale
			}
		}

		effect = {
			area_westvale = {
				add_province_modifier = {
					name = mission_elwynn_prosperity
					duration = -1
				}
			}
			area_eastvale = {
				add_province_modifier = {
					name = mission_elwynn_prosperity
					duration = -1
				}
			}

			add_years_of_income = 0.6

			986 = {
				add_base_production = 3
				add_building = wow_portal
			}
			954 = {
				add_base_production = 3
				add_center_of_trade_level = 1
			}
		}
	}

	STW_stormwind_m_kings_road = {
		icon = mission_horses
		position = 17

		required_missions = { STW_stormwind_m_westvale_and_eastvale }

		trigger = {
			603 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2138 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2139 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2146 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2147 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2148 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			661 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			717 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2194 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			903 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2178 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			2177 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			1058 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			922 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
			751 = {
				OR = {
					has_building = wow_road_1
					has_building = wow_road_2
					has_building = wow_road_3
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 751
				province_id = 922
				province_id = 1058
				province_id = 2177
				province_id = 603
				province_id = 903
				province_id = 2194
				province_id = 717
				province_id = 661
				province_id = 2148
				province_id = 2147
				province_id = 2146
				province_id = 2139
				province_id = 2138
				province_id = 2178
			}
		}

		effect = {
			region_elwynn_forest = {
				add_country_modifier = {
					name = mission_kings_road
					duration = -1
				}
			}
			region_westfall = {
				add_country_modifier = {
					name = mission_kings_road
					duration = -1
				}
			}
			region_duskwood = {
				add_country_modifier = {
					name = mission_kings_road
					duration = -1
				}
			}
			region_redridge_mountains = {
				add_country_modifier = {
					name = mission_kings_road
					duration = -1
				}
			}
		}
	} 
}

STW_stormwind_column_4 = { 
	slot = 4
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_m_secure_stranghlethorn = {
		icon = mission_barracks
		position = 2

		required_missions = { STW_stormwind_m_reestablish_order }

		trigger = {
			owns_core_province = 1996

			1996 = {
				has_fort_building_trigger = yes
				base_manpower = 4
			}
		}

		provinces_to_highlight = {
			province_id = 1996
		}

		effect = {
			1996 = {
				change_culture = ROOT
				add_province_modifier = {
					name = mission_stranglethorn_pass
					duration = -1
				}
			}
			country_event = { id = wwu_mission_stw_main.3 }
		}
	}

	STW_stormwind_m_kurzen_expedition = {
		icon = mission_bloodsail_raider
		position = 3

		required_missions = { STW_stormwind_m_secure_stranghlethorn }

		trigger = {
			area_kurzen_encampment = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			area = area_kurzen_encampment
		}

		effect = {
			area_fort_livingston = {
				add_permanent_claim = ROOT
				add_permanent_claim = F28
			}
			area_gurubashi_arena = {
				add_permanent_claim = ROOT
				add_permanent_claim = F28
			}
		}
	}

	STW_stormwind_m_fort_livingston = {
		icon = mission_headquarters
		position = 4

		required_missions = { STW_stormwind_m_kurzen_expedition }

		trigger = {
			548 = {
				base_tax = 3
				base_production = 3
				base_manpower = 6
				has_fort_building_trigger = yes
				OR = {
					has_building = wow_tower_1
					has_building = wow_tower_2
					has_building = wow_tower_3
					has_building = wow_arsenal_1
					has_building = wow_arsenal_2
					has_building = wow_arsenal_3
				}
			}
		}

		provinces_to_highlight = {
			province_id = 548
		}

		effect = {
			area_kalai = {
				add_permanent_claim = ROOT
			}
			area_upper_troll_ruins = {
				add_permanent_claim = ROOT
			}
			area_lower_troll_ruins = {
				add_permanent_claim = ROOT
			}
			area_zulakman = {
				add_permanent_claim = ROOT
			}

			area_fort_livingston = {
				change_culture = culture_stormwindian
			}

			define_advisor = {
				type = fortification_expert
				name = "Marshal Livingston"
				skill = 2
				location = 548
				discount = yes
				culture = culture_stormwindian
				religion = holy_light
			}

			custom_tooltip = SPECIALIST_LIVINGSTON_TT
			set_country_flag = stormwind_avalable_livingston

		}
	}

	STW_stormwind_m_into_the_jungle = {
		icon = mission_gorilla
		position = 5

		required_missions = { STW_stormwind_m_fort_livingston }

		trigger = {
			area_kalai = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			area_upper_troll_ruins = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			OR = {
				area = area_kalai
				area = area_upper_troll_ruins
			}
		}

		effect = {
			add_prestige = 10
			add_years_of_income = 1

			area_kalai = {
				change_culture = culture_stormwindian
				change_religion = ROOT
			}
		}
	}

	STW_stormwind_m_securing_southern_stranglethorn = {
		icon = mission_everbloom
		position = 6

		required_missions = { STW_stormwind_m_into_the_jungle }

		trigger = {
			area_lower_troll_ruins = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			area = area_lower_troll_ruins
		}

		effect = {
			add_adm_power = 75
			add_mil_power = 75
			add_treasury = 250

			if = {
				limit = {
					exists = A83
				}
				add_casus_belli = {
					target = A83
					type = cb_vassalize_mission
					months = 60
				}
			}
		}
	}

	STW_stormwind_m_control_booty_bay = {
		icon = mission_goblin_sailor
		position = 7

		required_missions = { STW_stormwind_m_securing_southern_stranglethorn }

		trigger = {
			area_booty_bay = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			area_jaguero_isle = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			A83 = {
				OR = {
					NOT = { exists = A83}
					is_subject_of = ROOT
				}
			}
		}

		provinces_to_highlight = {
			OR = {
				area = area_booty_bay
				area = area_jaguero_isle
			}
		}

		effect = {
			if = {
				limit = {
					A83 = {
						is_subject_of = ROOT
					}
				}
				add_country_modifier = {
					name = mission_booty_bay_protection
					duration = -1
				}
			}

			area_booty_bay = {
				add_province_modifier = {
					name = mission_stranglethorn_trade
					duration = -1
				}
			}

			area_jaguero_isle = {
				add_province_modifier = {
					name = mission_stranglethorn_trade
					duration = -1
				}
			}

			area_mistvale = {
				add_province_modifier = {
					name = mission_stranglethorn_trade
					duration = -1
				}
			}

			area_lower_troll_ruins = {
				add_province_modifier = {
					name = mission_stranglethorn_trade
					duration = -1
				}
			}
		}
	}

	STW_stormwind_m_reducing_the_unrest = {
		icon = mission_inscription
		position = 8

		trigger = {
			NOT = { is_at_war = yes }
			stability = 2
			NOT = { unrest = 5 }
			overextension_percentage = 0

			region_westfall = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}

			region_duskwood = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}

			region_redridge_mountains = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			OR = {
				region = region_westfall
				region = region_duskwood
				region = region_redridge_mountains
			}
		}

		effect = {
			add_adm_power = 200
		}
	}

	STW_stormwind_m_restoration_faith_westfall = {
		icon = mission_barn
		position = 9

		required_missions = { STW_stormwind_m_reducing_the_unrest }

		trigger = {
			region_westfall = {
				type = all
				religion = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_westfall
		}

		effect = {
			add_adm_power = 50
			add_prestige = 10
		}
	}

	STW_stormwind_m_human_repopulation_westfall = {
		icon = mission_human_female
		position = 10

		required_missions = { STW_stormwind_m_restoration_faith_westfall }

		trigger = {
			region_westfall = {
				type = all
				culture = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_westfall
		}

		effect = {
			region_westfall = {
				add_province_modifier = {
					name = mission_westfall_production
					duration = 7300
				}
			}
		}
	}

	STW_stormwind_m_development_westfall = {
		icon = mission_lumbermill
		position = 11

		required_missions = { STW_stormwind_m_human_repopulation_westfall }

		trigger = {
			716 = {
				development = 15
			}
			596 = {
				development = 15
			}
			612 = {
				development = 10
			}
			784 = {
				development = 10
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 716
				province_id = 596
				province_id = 784
				province_id = 612
			}
		}

		effect = {
			region_westfall = {
				add_province_modifier = {
					name = mission_westfall_developed
					duration = -1
				}
			}
		}
	}

	STW_stormwind_m_new_age_prosperity = {
		icon = mission_goblet
		position = 12

		required_missions = {
			STW_stormwind_m_development_westfall
			STW_stormwind_m_development_duskwood
			STW_stormwind_m_development_redridge
		}

		trigger = {
			is_at_war = no
			num_of_rebel_armies = 0
			stability = 3
			legitimacy = 90
		}

		effect = {
			add_adm_power = 100
			add_dip_power = 100
			add_mil_power = 100

			add_country_modifier = {
				name = mission_new_age_prosperity
				duration = 7300
			}

			remove_country_modifier = stormwind_isolationism
		}
	}

	stw_stormwind_m_northshire_vineyards = {
		icon = mission_mirror_of_elune
		position = 16

		required_missions = { STW_stormwind_m_goldshire_expansion }

		trigger = {
			area_northshire = {
				type = all
				owned_by = ROOT
				religion = ROOT
				culture = ROOT
				development = 10
			}
		}

		provinces_to_highlight = {
			area = area_northshire
		}

		effect = {
			add_stability = 1

			area_northshire = {
				add_province_modifier = {
					name = mission_elwynn_prosperity
					duration = -1
				}
			}

			add_country_modifier = {
				name = mission_wine
				duration = 9125
			}
		}
	}
}

STW_stormwind_column_5 = {
	slot = 5
	generic = no
	ai = yes
    has_country_shield = yes
    
	potential = {
		tag = STW
		has_country_flag = stormwind_one_finished
	}

	STW_stormwind_m_building_the_fleet = {
		icon = mission_ship_1
		position = 1

		trigger = {
			navy_size = 25
			num_of_admirals = 1
			sailors_percentage = 0.9
		}

		effect = {
			add_country_modifier = {
				name = mission_stw_contstruct_fleet
				duration = 9125
			}
			2141 = {
				add_building = wow_shipyard_3
				add_building = wow_dockyard_3
				add_base_production = 3
			}
		}
	}

	STW_stormwind_m_mercantile_connections = {
		icon = mission_ship_3
		position = 2

		required_missions = { STW_stormwind_m_building_the_fleet }

		trigger = {
			num_of_light_ship = 20

			2202 = {
				is_strongest_trade_power = ROOT
			}
			596 = {
				is_strongest_trade_power = ROOT
			}
			1021 = {
				is_strongest_trade_power = ROOT
			}
			737 = {
				is_strongest_trade_power = ROOT
			}
			996 = {
				is_strongest_trade_power = ROOT
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 2202
				province_id = 596
				province_id = 1021
				province_id = 737
				province_id = 996
			}
		}

		effect = {
			add_country_modifier = {
				name = mission_stormwind_mercentile
				duration = -1
			}

			custom_tooltip = STORMWIND_UNLOCK_MERCENTILE_FLAGSHIP_TT

            hidden_effect = {
                set_country_flag = stormwind_mercentile_unlock
            }
		}
	}

	STW_stormwind_m_stormwind_armada = {
		icon = mission_ship_4
		position = 3

		required_missions = { STW_stormwind_m_mercantile_connections }

		trigger = {
			num_of_heavy_ship = 30
			navy_size_percentage = 0.9
			num_of_admirals = 3
		}

		effect = {
			add_country_modifier = {
				name = mission_kings_fleet
				duration = -1
			}

			custom_tooltip = STORMWIND_UNLOCK_ARMADA_FLAGSHIP_TT

            hidden_effect = {
                set_country_flag = stormwind_grand_armada_unlock
            }
		}
	}

	STW_stormwind_m_balor_naval_command = {
		icon = mission_ship_sailing
		position = 4

		trigger = {
			4111 = {
				base_manpower = 8
				base_production = 8
				OR = {
					has_building = wow_dockyard_1
					has_building = wow_dockyard_2
					has_building = wow_dockyard_3
				}
				OR = {
					has_building = wow_shipyard_1
					has_building = wow_shipyard_2
					has_building = wow_shipyard_3
				}
				OR = {
					has_building = wow_tower_1
					has_building = wow_tower_2
					has_building = wow_tower_3
				}
				has_fort_building_trigger = yes
			}

			region_vashjir = {
				OR = {
					owned_by = ROOT
					owned_by = BLR
				}
			}
		}

		provinces_to_highlight = {
			province_id = 4111
		}

		effect = {
			country_event = { id = wwu_mission_stw_main.5 }

			area_drisburg = {
				add_permanent_claim = ROOT
			}
		}
	}

	STW_stormwind_m_moving_against_zulgurub = {
		icon = mission_dire_troll
		position = 6

		required_missions = { STW_stormwind_m_into_the_jungle }

		trigger = {
			area_zulakman = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		provinces_to_highlight = {
			area = area_zulakman
		}

		effect = {
			area_zul_gurub = {
				add_permanent_claim = ROOT
			}
		}
	}

	STW_stormwind_m_siege_of_zulgurub = {
		icon = mission_troll_hexxer
		position = 7

		required_missions = { STW_stormwind_m_moving_against_zulgurub }

		trigger = {
			OR = {
				NOT = { exists = A66 }
				A66 = {
					defensive_war_with = STW
				}
			}
			area_zul_gurub = {
				type = all
				controlled_by = ROOT
			}
		}

		provinces_to_highlight = {
			area = area_zul_gurub
		}

		effect = {
			country_event = { id = wwu_mission_stw_main.6 }
			
			A66 = {
				country_event = { id = wwu_mission_stw_main.7 days = 3 }
			}
		}
	}

	STW_stormwind_m_restoration_faith_redridge = {
		icon = mission_paladin_divine_storm
		position = 9

		required_missions = { STW_stormwind_m_reducing_the_unrest }

		trigger = {
			region_redridge_mountains = {
				type = all
				religion = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_redridge_mountains
		}

		effect = {
			add_adm_power = 50
			add_mil_power = 50
			add_prestige = 5
		}
	}

	STW_stormwind_m_human_repopulation_redridge = {
		icon = mission_human_male
		position = 10

		required_missions = { STW_stormwind_m_restoration_faith_redridge }

		trigger = {
			region_redridge_mountains = {
				type = all
				culture = ROOT
			}
		}

		provinces_to_highlight = {
			region = region_redridge_mountains
		}

		effect = {
			region_redridge_mountains = {
				add_province_modifier = {
					name = mission_redridge_production
					duration = 7300
				}
			}
		}
	}

	STW_stormwind_m_development_redridge = {
		icon = mission_lakeshire
		position = 11

		required_missions = { STW_stormwind_m_human_repopulation_redridge }

		trigger = {
			737 = {
				development = 15
			}
			2194 = {
				development = 12
			}
			717 = {
				development = 8
			}
			785 = {
				development = 8
			}
			2195 = {
				development = 8
			}
		}

		provinces_to_highlight = {
			OR = {
				province_id = 737
				province_id = 2194
				province_id = 717
				province_id = 785
				province_id = 2195
			}
		}

		effect = {
			region_redridge_mountains = {
				add_province_modifier = {
					name = mission_redridge_developed
					duration = -1
				}
			}
		}
	} 
}